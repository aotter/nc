import{g as d,a as h,s as N,e as s,p as O}from"./1bca2f4c.js";import{C as c,T as a,I as n,a as m,P as p,R as k}from"./1236a3b0.js";import"./73fb6fc3.js";const r=(t,e)=>{s.emit(t,JSON.stringify(e))},f={[c]:t=>{r(c,t);const{tracks:e=[]}=t;f[a]({name:c,tracks:e})},[n]:t=>{r(n,t)},[m]:t=>{r(m,t)},[p]:t=>{r(p,t)},[k]:(t,e)=>{const{extractColorElement:i,color:o}=e||{},l=o?d(o):i?h(i):[],{expensiveEvents:g=[],preloadUrls:v=[]}=t;r(k,{colorPalette:l,expensiveEvents:g,preloadUrls:v.filter(Boolean)})},[a]:t=>{r(a,t),N(t.tracks)}},x={[c]:t=>{s.on(c,t)},[n]:(t,e)=>{s.once(n,t);const{impressions:i=[]}=e||{},o=[...i],l=[],g=({intersectionRatio:v,isIntersecting:C})=>{!o.length||!C||o.forEach((u,E)=>{clearTimeout(l[E]);const{settings:{ratio:I=.5,remain:P=1e3},tracks:R=[]}=u;v>=I&&(l[E]=setTimeout(()=>{f[a]({name:n,tracks:R}),O(o,E),f[n](i)},P))})};x[m](g)},[m]:t=>{s.on(m,t)},[p]:t=>{s.on(p,t)},[k]:t=>{s.once(k,t)},[a]:t=>{s.on(a,t)}};export{f as emit,x as on};
