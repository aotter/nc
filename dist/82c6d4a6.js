import{g as P,a as R,s as S,e as o,p as d}from"./010f1af2.js";import{C as i,T as r,I as n,a as l,P as g,R as k}from"./1236a3b0.js";import"./9ae271b2.js";const c=(s,t)=>{o.emit(s,JSON.stringify(t))},f={[i]:s=>{c(i,s);const{tracks:t=[]}=s;f[r]({name:i,tracks:t})},[n]:s=>{c(n,s)},[l]:s=>{c(l,s)},[g]:s=>{c(g,s)},[k]:(s,t)=>{const{extractColorElement:e,color:a}=t||{},p=a?P(a):e?R(e):[],{expensiveEvents:v=[],preloadUrls:E=[]}=s;c(k,{colorPalette:p,expensiveEvents:v,preloadUrls:E.filter(Boolean)})},[r]:s=>{c(r,s),S(s.tracks)}},m=s=>t=>{try{s(JSON.parse(t))}catch(e){console.error(e)}},C={[i]:s=>{o.on(i,s)},[n]:(s,t)=>{o.once(n,m(s));const{impressions:e=[]}=t||{},a=[...e],p=[],v=({intersectionRatio:E,isIntersecting:h})=>{!a.length||!h||a.forEach((u,x)=>{clearTimeout(p[x]);const{settings:{ratio:I=.5,remain:J=1e3},tracks:N=[]}=u;E>=I&&(p[x]=setTimeout(()=>{f[r]({name:n,tracks:N}),d(a,x),f[n](e)},J))})};C[l](v)},[l]:s=>{o.on(l,m(s))},[g]:s=>{o.on(g,m(s))},[k]:s=>{o.once(k,m(s))},[r]:s=>{o.on(r,m(s))}};export{f as emit,C as on};
