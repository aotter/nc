import{g as d,a as h,s as N,e as s,p as O}from"./ff07de00.js";import{C as c,T as a,I as n,a as m,P as p,R as k}from"./1236a3b0.js";import"./0fa97106.js";import"./319454f1.js";const r=(e,t)=>{s.emit(e,JSON.stringify(t))},f={[c]:e=>{r(c,e);const{tracks:t=[]}=e;f[a]({name:c,tracks:t})},[n]:e=>{r(n,e)},[m]:e=>{r(m,e)},[p]:e=>{r(p,e)},[k]:(e,t)=>{const{extractColorElement:i,color:o}=t||{},l=o?d(o):i?h(i):[],{expensiveEvents:g=[],preloadUrls:v=[]}=e;r(k,{colorPalette:l,expensiveEvents:g,preloadUrls:v.filter(Boolean)})},[a]:e=>{r(a,e),N(e.tracks)}},x={[c]:e=>{s.on(c,e)},[n]:(e,t)=>{s.once(n,e);const{impressions:i=[]}=t||{},o=[...i],l=[],g=({intersectionRatio:v,isIntersecting:C})=>{!o.length||!C||o.forEach((u,E)=>{clearTimeout(l[E]);const{settings:{ratio:I=.5,remain:P=1e3},tracks:R=[]}=u;v>=I&&(l[E]=setTimeout(()=>{f[a]({name:n,tracks:R}),O(o,E),f[n](i)},P))})};x[m](g)},[m]:e=>{s.on(m,e)},[p]:e=>{s.on(p,e)},[k]:e=>{s.once(k,e)},[a]:e=>{s.on(a,e)}};export{f as emit,x as on};
