import{g as P,a as R,s as S,e,p as d}from"./cf2794c7.js";import{C as i,T as r,I as n,a as m,P as g,R as v,_ as l}from"./9837cbe8.js";import"./ca1f3d0c.js";const c=(s,o)=>{e.emit(s,JSON.stringify(o))},p={[i]:s=>{c(i,s);const{tracks:o=[]}=s;p[r]({name:i,tracks:o})},[n]:s=>{c(n,s)},[m]:s=>{c(m,s)},[g]:s=>{c(g,s)},[v]:(s,o)=>{const{extractColorElement:t,color:a}=o||{},f=a?P(a):t?R(t):[],{expensiveEvents:E=[],preloadUrls:T=[]}=s,k={colorPalette:f,expensiveEvents:E,preloadUrls:T.filter(Boolean)};c(v,k),p[l](k)},[r]:s=>{c(r,s),S(s.tracks)},[l]:s=>{e.emit(l,s)}},x=s=>o=>{try{s(JSON.parse(o))}catch(t){console.error(t)}},u={[i]:s=>{e.on(i,s)},[n]:(s,o)=>{e.once(n,s);const{impressions:t=[]}=o||{},a=[...t],f=[],E=({intersectionRatio:T,isIntersecting:k})=>{!a.length||!k||a.forEach((C,h)=>{clearTimeout(f[h]);const{settings:{ratio:I=.5,remain:J=1e3},tracks:N=[]}=C;T>=I&&(f[h]=setTimeout(()=>{p[r]({name:n,tracks:N}),d(a,h),p[n](t)},J))})};u[m](E)},[m]:s=>{e.on(m,x(s))},[g]:s=>{e.on(g,x(s))},[v]:s=>{e.once(v,s)},[r]:s=>{e.on(r,s)},[l]:s=>{e.once(l,s)}};export{p as emit,u as on};
